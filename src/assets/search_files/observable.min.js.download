var ObservableObject=function(n,t){this.value=n;this.history=[];this.changeCallbacks={};this.lookUpProperty=t;this.doNotCallCallbacksOnce=!1;this.recordHistory();this.trackChanges()};ObservableObject.prototype={constructor:ObservableObject,isChanged:function(){return!this.history[0].equals(this.history[1])},trackChanges:function(){var n=function(n,t){if(!t)return n;var r=t.split("."),i=n;return r.forEach(function(n){i=i[n]}),i};setInterval(function(){if(this.recordHistory(),this.history.length>2&&this.history.shift(),this.isChanged())try{var t=n(this.history.first(),this.lookUpProperty),i=n(this.history.last(),this.lookUpProperty);if(t===null&&i===null)return;if(t===undefined&&i===undefined)return;t==null||t==undefined||i==null||i==undefined||t.equals(i)||this.callChangeCallbacks()}catch(r){t&&!i?this.callChangeCallbacks():i&&!t&&this.callChangeCallbacks()}}.bind(this),0)},callChangeCallbacks:function(){if(this.doNotCallCallbacksOnce){this.doNotCallCallbacksOnce=!1;return}for(var n in this.changeCallbacks)this.changeCallbacks.hasOwnProperty(n)&&this.changeCallbacks[n].call(null,this.value,this.history.first())},onChange:function(n){return this.changeCallbacks[n.name]=n,this},offChange:function(n){return n in this.changeCallbacks&&delete this.changeCallbacks[n],this},recordHistory:function(){this.history.push({}.extendWith(this.value))}}